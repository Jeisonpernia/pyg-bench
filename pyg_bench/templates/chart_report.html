<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Test Results</title>
        <script src="//code.highcharts.com/highcharts.js"></script>
        <script src="//code.highcharts.com/highcharts-more.js"></script>
				<script src="//code.highcharts.com/modules/series-label.js"></script>
				<script src="//code.highcharts.com/modules/exporting.js"></script>
				<script src="//code.highcharts.com/modules/export-data.js"></script>
				<script src="//code.highcharts.com/modules/solid-gauge.js"></script>
				<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
				<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
				<script src="//cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
				<script>
					window.jQuery || document.write('<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"><\/script>;')
				</script>

    </head>
    <body>
    		<h1 class="header center">{{ title }}</h1>
        	<div id="container">
        		<div class="row">
						  <div class="col s8">
						  	<div id="container1"></div>
						  </div>
						  <div class="col s4">
						  	<div id="container4"></div>
						  </div>
						</div>
						<div class="row">
						 	<div class="col s4">
			      		<div id="container2"></div>
			      	</div>
			      	<div class="col s4">
			      		<div id="container3"></div>
			      	</div>
			      	<div class="col s4">
			      		<div id="container5"></div>
			      	</div>
			      </div>
        	</div>
        <script type="text/javascript">
        		var chart_1 = Highcharts.chart('container1', {

				    title: {
				        text: 'Database Response Time per query'
				    },

					  xAxis: {
				                type: 'datetime'
				            },
				    yAxis: {
				        title: {
				            text: 'Response Time (sec)'
				        }
				    },
				   
				    plotOptions: {
				        series: {
				        turboThreshold: 100000
				        }
				    },

				    series: [],

				    responsive: {
				        rules: [{
				            condition: {
				                maxWidth: 500
				            },
				            chartOptions: {
				                legend: {
				                    layout: 'horizontal',
				                    align: 'center',
				                    verticalAlign: 'bottom'
				                }
				            }
				        }]
				    }

				});

        		var chart_2 = Highcharts.chart('container2', {
				    chart: {
				        type: 'column'
				    },
				    title: {
				        text: 'Database Average Response Time'
				    },
				    xAxis: {
				        type: 'category'
				    },
				    yAxis: {
				        title: {
				            text: 'Average Response Time Total'
				        }

				    },
				    plotOptions: {
				        series: {
				            borderWidth: 0,
				            dataLabels: {
				                enabled: true,
				                format: '{point.y:.1f}sec'
				            }
				        }
				    },
 					series: []
   				});


        	var chart_3 = Highcharts.chart('container3', {
				    chart: {
				        type: 'column'
				    },
				    title: {
				        text: 'Total query executed in {{time_execution_in_sec}} seconds'
				    },
				    xAxis: {
				        type: 'category'
				    },
				    yAxis: {
				        title: {
				            text: 'Total query executed'
				        }

				    },
				    plotOptions: {
				        series: {
				            borderWidth: 0,
				            dataLabels: {
				                enabled: true,
				                format: '{point.y:.1f}'
				            }
				        }
				    },
 						series: []
   				});

   				var chart_4 = Highcharts.chart('container4', {
				    chart: {
				        type: 'column'
				    },
				    title: {
				        text: 'Total exceptions'
				    },
				    xAxis: {
				        type: 'category'
				    },
				    yAxis: {
				        title: {
				            text: 'Total errors'
				        }

				    },
				    plotOptions: {
				        series: {
				            borderWidth: 0,
				            dataLabels: {
				                enabled: true,
				                format: '{point.y:.1f}'
				            }
				        }
				    },
 						series: []
   				});

   				var gaugeOptions = {
				    chart: {
				        type: 'solidgauge'
				    },

				    title: null,

				    pane: {
				        center: ['50%', '85%'],
				        size: '140%',
				        startAngle: -90,
				        endAngle: 90,
				        background: {
				            backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
				            innerRadius: '60%',
				            outerRadius: '100%',
				            shape: 'arc'
				        }
				    },

				    tooltip: {
				        enabled: false
				    },

				    // the value axis
				    yAxis: {
				        stops: [
				            [0.1, '#55BF3B'], // green
				            [0.5, '#DDDF0D'], // yellow
				            [0.9, '#DF5353'] // red
				        ],
				        lineWidth: 0,
				        minorTickInterval: null,
				        tickAmount: 2,
				        title: {
				            y: -70
				        },
				        labels: {
				            y: 0
				        }
				    },

				    plotOptions: {
				        solidgauge: {
				            dataLabels: {
				                y: 0,
				                borderWidth: 0,
				                useHTML: true
				            }
				        }
				    }
				};

				// The speed gauge
				var chart_5 = Highcharts.chart('container5', Highcharts.merge(gaugeOptions, {
			    yAxis: {
			        min: 0,
			        max: 200,
			        title: {
			            text: 'Threads spwaned'
			        }
			    },

			    credits: {
			        enabled: false
			    },

			    series: [{
			        name: 'Paralalel execution',
			        data: [1],
			        dataLabels: {
			            format: '<div style="text-align:center"><span style="font-size:25px;color:' +
			                ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
			                   '<span style="font-size:12px;color:silver">threads</span></div>'
			        },
			        tooltip: {
			            valueSuffix: ' Threads/executions'
			        }
			    }]

				}));
        </script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script type="text/javascript">
        	function AddDataChart(chart_id, data) {
        		var chart = eval("chart_" + chart_id)

        		var testSerie = false;
        		var id_serie = "";

        		var chart_color = {
        			"select": "blue",
        			"insert": "green",
        			"update": "black",
        			"error": "red"
        		}

        		for (var x=0; x <= chart.series.length -1; x++) {
        			if (data["serie"] == chart.series[x].name) {
        				testSerie = true;
        				id_serie = x;
        				break;
        			}
        		}

        		if (!testSerie) {
        			chart.addSeries({
        				name: data["serie"],
        				id: data["serie"],
        				data: [data["data"]],
        				color: chart_color[data["serie"]]
        			}, true);
        		} else {
        			if (chart_id == 1) {
        				chart.series[id_serie].addPoint(data["data"]);
        			} else if (chart_id == 5) {

						    var point,
						        newVal,
						        inc;

				        point = chart_5.series[0].points[0];
				        inc = data["data"];
				        newVal = point.y + inc;

				        if (newVal < 0 || newVal > 200) {
				            newVal = point.y - inc;
				        }

				        point.update(newVal);
        			} else {
        				chart.series[id_serie].setData([data["data"]], true);
        			}
        		}
        	}
        </script>
    </body>
</html>